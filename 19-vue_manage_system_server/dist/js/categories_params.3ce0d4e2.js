(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["categories_params"],{1276:function(t,e,a){"use strict";var r=a("d784"),n=a("44e7"),i=a("825a"),s=a("1d80"),o=a("4840"),l=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),p=a("d039"),m=[].push,f=Math.min,g=4294967295,h=!p((function(){return!RegExp(g,"y")}));r("split",2,(function(t,e,a){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,a){var r=String(s(this)),i=void 0===a?g:a>>>0;if(0===i)return[];if(void 0===t)return[r];if(!n(t))return e.call(r,t,i);var o,l,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=new RegExp(t.source,p+"g");while(o=d.call(h,r)){if(l=h.lastIndex,l>f&&(u.push(r.slice(f,o.index)),o.length>1&&o.index<r.length&&m.apply(u,o.slice(1)),c=o[0].length,f=l,u.length>=i))break;h.lastIndex===o.index&&h.lastIndex++}return f===r.length?!c&&h.test("")||u.push(""):u.push(r.slice(f)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,a){return void 0===t&&0===a?[]:e.call(this,t,a)}:e,[function(e,a){var n=s(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n,a):r.call(String(n),e,a)},function(t,n){var s=a(r,t,this,n,r!==e);if(s.done)return s.value;var d=i(t),p=String(this),m=o(d,RegExp),v=d.unicode,b=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),x=new m(h?d:"^(?:"+d.source+")",b),w=void 0===n?g:n>>>0;if(0===w)return[];if(0===p.length)return null===u(x,p)?[p]:[];var _=0,y=0,C=[];while(y<p.length){x.lastIndex=h?y:0;var k,P=u(x,h?p:p.slice(y));if(null===P||(k=f(c(x.lastIndex+(h?0:y)),p.length))===_)y=l(p,y,v);else{if(C.push(p.slice(_,y)),C.length===w)return C;for(var D=1;D<=P.length-1;D++)if(C.push(P[D]),C.length===w)return C;y=_=k}}return C.push(p.slice(_)),C}]}),!h)},"14c3":function(t,e,a){var r=a("c6b6"),n=a("9263");t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(t))throw TypeError("RegExp#exec called on incompatible receiver");return n.call(t,e)}},"44e7":function(t,e,a){var r=a("861d"),n=a("c6b6"),i=a("b622"),s=i("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==n(t))}},"498a":function(t,e,a){"use strict";var r=a("23e7"),n=a("58a8").trim,i=a("c8d2");r({target:"String",proto:!0,forced:i("trim")},{trim:function(){return n(this)}})},5621:function(t,e,a){var r=a("8f11");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("499e").default;n("543efe21",r,!0,{sourceMap:!1,shadowMode:!1})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),n=a("5899"),i="["+n+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),l=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(s,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:l(1),end:l(2),trim:l(3)}},"68ae":function(t,e,a){"use strict";var r=a("7561"),n=a.n(r);n.a},7561:function(t,e,a){var r=a("b146");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var n=a("499e").default;n("6855c680",r,!0,{sourceMap:!1,shadowMode:!1})},"8aa5":function(t,e,a){"use strict";var r=a("6547").charAt;t.exports=function(t,e,a){return e+(a?r(t,e).length:1)}},"8f11":function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,".el-alert[data-v-4cd2a54a]{margin-bottom:15px}.el-cascader[data-v-4cd2a54a]{width:300px}.el-tabs[data-v-4cd2a54a]{margin-top:15px}.el-tag[data-v-4cd2a54a],.input-new-tag[data-v-4cd2a54a]{margin-left:5px}.input-new-tag[data-v-4cd2a54a]{width:120px}.input-new-button[data-v-4cd2a54a]{margin-left:5px}",""]),t.exports=e},9263:function(t,e,a){"use strict";var r=a("ad6d"),n=a("9f7f"),i=RegExp.prototype.exec,s=String.prototype.replace,o=i,l=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=n.UNSUPPORTED_Y||n.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=l||u||c;d&&(o=function(t){var e,a,n,o,d=this,p=c&&d.sticky,m=r.call(d),f=d.source,g=0,h=t;return p&&(m=m.replace("y",""),-1===m.indexOf("g")&&(m+="g"),h=String(t).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==t[d.lastIndex-1])&&(f="(?: "+f+")",h=" "+h,g++),a=new RegExp("^(?:"+f+")",m)),u&&(a=new RegExp("^"+f+"$(?!\\s)",m)),l&&(e=d.lastIndex),n=i.call(p?a:d,h),p?n?(n.input=n.input.slice(g),n[0]=n[0].slice(g),n.index=d.lastIndex,d.lastIndex+=n[0].length):d.lastIndex=0:l&&n&&(d.lastIndex=d.global?n.index+n[0].length:e),u&&n&&n.length>1&&s.call(n[0],a,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n}),t.exports=o},"9f7f":function(t,e,a){"use strict";var r=a("d039");function n(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=r((function(){var t=n("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=r((function(){var t=n("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),p=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,h=9007199254740991,v="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!m},{splice:function(t,e){var a,r,u,d,p,m,b=o(this),x=s(b.length),w=n(t,x),_=arguments.length;if(0===_?a=r=0:1===_?(a=0,r=x-w):(a=_-2,r=g(f(i(e),0),x-w)),x+a-r>h)throw TypeError(v);for(u=l(b,r),d=0;d<r;d++)p=w+d,p in b&&c(u,d,b[p]);if(u.length=r,a<r){for(d=w;d<x-r;d++)p=d+r,m=d+a,p in b?b[m]=b[p]:delete b[m];for(d=x;d>x-r+a;d--)delete b[d-1]}else if(a>r)for(d=x-r;d>w;d--)p=d+r-1,m=d+a-1,p in b?b[m]=b[p]:delete b[m];for(d=0;d<a;d++)b[d+w]=arguments[d+2];return b.length=x-r+a,u}})},a652:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("参数列表")])],1),a("el-card",[a("el-alert",{attrs:{title:"注意：只允许为三级分类设置相关参数！",type:"warning","show-icon":""}}),a("el-row",[a("el-col",[a("span",[t._v("选择商品分类：")]),a("el-cascader",{attrs:{options:t.catList,props:t.catProps,clearable:""},on:{change:t.catSelectChange},model:{value:t.catSelectedList,callback:function(e){t.catSelectedList=e},expression:"catSelectedList"}})],1)],1),a("el-tabs",{on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"动态参数",name:"many"}},[a("el-button",{attrs:{type:"primary",disabled:t.isBtnDisable},on:{click:function(e){t.showParamsDialog=!0}}},[t._v("添加参数")]),a("el-table",{attrs:{data:t.manyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.removeTag(n,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"input-new-button",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"参数名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editParamsDialog(e.row.attr_id)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"静态属性",name:"only"}},[a("el-button",{attrs:{type:"primary",disabled:t.isBtnDisable},on:{click:function(e){t.showParamsDialog=!0}}},[t._v("添加属性")]),a("el-table",{attrs:{data:t.onlyTableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.attr_vals,(function(r,n){return a("el-tag",{key:n,attrs:{closable:""},on:{close:function(a){return t.removeTag(n,e.row)}}},[t._v(t._s(r))])})),e.row.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(a){return t.handleInputConfirm(e.row)}},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleInputConfirm(e.row)}},model:{value:e.row.inputValue,callback:function(a){t.$set(e.row,"inputValue",a)},expression:"scope.row.inputValue"}}):a("el-button",{staticClass:"input-new-button",attrs:{size:"small"},on:{click:function(a){return t.showInput(e.row)}}},[t._v("+ New Tag")])]}}])}),a("el-table-column",{attrs:{type:"index"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"attr_name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.editParamsDialog(e.row.attr_id)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return t.deleteParams(e.row.attr_id)}}},[t._v("删除")])]}}])})],1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加"+t.showDialogTitle,visible:t.showParamsDialog,width:"50%"},on:{"update:visible":function(e){t.showParamsDialog=e},close:t.closeAddDialog}},[a("el-form",{ref:"addParamsRefs",attrs:{model:t.addParamsForm,rules:t.addParamsRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.showDialogTitle,prop:"attr_name"}},[a("el-input",{model:{value:t.addParamsForm.attr_name,callback:function(e){t.$set(t.addParamsForm,"attr_name",e)},expression:"addParamsForm.attr_name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showParamsDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddParamsDialog}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"修改"+t.showDialogTitle,visible:t.showEditParamsDialog,width:"50%"},on:{"update:visible":function(e){t.showEditParamsDialog=e},close:t.closeEditDialog}},[a("el-form",{ref:"editParamsRefs",attrs:{model:t.editParamsForm,rules:t.editParamsRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:t.showDialogTitle,prop:"attr_name"}},[a("el-input",{model:{value:t.editParamsForm.attr_name,callback:function(e){t.$set(t.editParamsForm,"attr_name",e)},expression:"editParamsForm.attr_name"}})],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showEditParamsDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitEditParamsDialog}},[t._v("确 定")])],1)],1)],1)},n=[],i=(a("99af"),a("4160"),a("a15b"),a("a434"),a("ac1f"),a("1276"),a("498a"),a("159b"),a("96cf"),a("1da1")),s={data:function(){return{catList:[],catSelectedList:[],catProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children"},activeName:"many",manyTableData:[],onlyTableData:[],showParamsDialog:!1,showEditParamsDialog:!1,addParamsForm:{},addParamsRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]},editParamsForm:{},editParamsRules:{attr_name:[{required:!0,message:"请输入参数名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}]}}},created:function(){this.getParamsForm()},methods:{getParamsForm:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories");case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取商品分类失败"));case 6:t.catList=r.data;case 7:case"end":return e.stop()}}),e)})))()},catSelectChange:function(){this.getCatParams()},tabClick:function(){this.getCatParams()},getCatParams:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(3===t.catSelectedList.length){e.next=5;break}return t.catSelectedList=[],t.manyTableData=[],t.onlyTableData=[],e.abrupt("return");case 5:return e.next=7,t.$http.get("categories/".concat(t.cateId,"/attributes"),{params:{sel:t.activeName}});case 7:if(a=e.sent,r=a.data,200===r.meta.status){e.next=11;break}return e.abrupt("return",t.$message.error("获取参数列表失败！"));case 11:r.data.forEach((function(t){t.attr_vals=t.attr_vals?t.attr_vals.split(" "):[],t.inputVisible=!1,t.inputValue=""})),"many"===t.activeName?t.manyTableData=r.data:t.onlyTableData=r.data;case 13:case"end":return e.stop()}}),e)})))()},closeAddDialog:function(){this.$refs.addParamsRefs.resetFields()},closeEditDialog:function(){this.$refs.editParamsRefs.resetFields()},submitAddParamsDialog:function(){var t=this;this.$refs.addParamsRefs.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return",t.$message.error("输入错误，请重新输入！"));case 2:return e.next=4,t.$http.post("categories/".concat(t.cateId,"/attributes"),{attr_name:t.addParamsForm.attr_name,attr_sel:t.activeName});case 4:if(r=e.sent,n=r.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("提交参数失败！"));case 8:t.$message.success("提交参数成功！"),t.getCatParams();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.showParamsDialog=!1},editParamsDialog:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.get("categories/".concat(e.cateId,"/attributes/").concat(t));case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("修改数据失败！"));case 6:e.editParamsForm=n.data,e.showEditParamsDialog=!0;case 8:case"end":return a.stop()}}),a)})))()},submitEditParamsDialog:function(){var t=this;this.$refs.editParamsRefs.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.put("categories/".concat(t.cateId,"/attributes/").concat(t.editParamsForm.attr_id),{attr_name:t.editParamsForm.attr_name,attr_sel:t.activeName});case 4:if(r=e.sent,n=r.data,200===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("修改参数数据失败！"));case 8:t.getCatParams();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.showEditParamsDialog=!1},deleteParams:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$confirm("此操作将永久删除该参数, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(t){return t}));case 2:if(r=a.sent,"confirm"===r){a.next=5;break}return a.abrupt("return",e.$message.info("用户取消了删除操作！"));case 5:return a.next=7,e.$http.delete("categories/".concat(e.cateId,"/attributes/").concat(t),{attr_sel:e.activeName});case 7:if(n=a.sent,i=n.data,200===i.meta.status){a.next=11;break}return a.abrupt("return",e.$message.error("修改参数失败！"));case 11:e.getCatParams();case 12:case"end":return a.stop()}}),a)})))()},handleInputConfirm:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==t.inputValue.trim().length){a.next=4;break}return t.inputValue="",t.inputVisible=!1,a.abrupt("return");case 4:t.attr_vals.push(t.inputValue.trim()),t.inputValue="",t.inputVisible=!1,e.saveAttrval(t);case 8:case"end":return a.stop()}}),a)})))()},saveAttrval:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e.$http.put("categories/".concat(e.cateId,"/attributes/").concat(t.attr_id),{attr_name:t.attr_name,attr_sel:t.attr_sel,attr_vals:t.attr_vals.join(" ")});case 2:if(r=a.sent,n=r.data,200===n.meta.status){a.next=6;break}return a.abrupt("return",e.$message.error("保存参数项出错！"));case 6:e.$message.success("修改参数项成功");case 7:case"end":return a.stop()}}),a)})))()},showInput:function(t){var e=this;t.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},removeTag:function(t,e){e.attr_vals.splice(t,1),this.saveAttrval(e)}},computed:{isBtnDisable:function(){return 3!==this.catSelectedList.length},cateId:function(){return 3===this.catSelectedList.length?this.catSelectedList[2]:null},showDialogTitle:function(){return"many"===this.activeName?"动态参数":"静态属性"}}},o=s,l=(a("dea9"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"4cd2a54a",null);e["default"]=c.exports},ac1f:function(t,e,a){"use strict";var r=a("23e7"),n=a("9263");r({target:"RegExp",proto:!0,forced:/./.exec!==n},{exec:n})},b146:function(t,e,a){var r=a("24fb");e=r(!1),e.push([t.i,".treetable[data-v-446be68f]{margin-top:15px;margin-bottom:15px}.el-cascader[data-v-446be68f]{width:100%}",""]),t.exports=e},c8d2:function(t,e,a){var r=a("d039"),n=a("5899"),i="​᠎";t.exports=function(t){return r((function(){return!!n[t]()||i[t]()!=i||n[t].name!==t}))}},ca6c:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商品管理")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("el-card",[a("el-row",[a("el-button",{attrs:{type:"primary"},on:{click:t.addCatDialog}},[t._v("添加分类")])],1),a("tree-table",{staticClass:"treetable",attrs:{data:t.catList,columns:t.columns,"show-index":!0,"index-text":"#","selection-type":!1,"expand-type":!1},scopedSlots:t._u([{key:"isok",fn:function(t){return[!1===t.row.cat_deleted?a("i",{staticClass:"el-icon-success",staticStyle:{color:"lightgreen"}}):a("i",{staticClass:"el-icon-error",staticStyle:{color:"red"}})]}},{key:"level",fn:function(e){return[0===e.row.cat_level?a("el-tag",{attrs:{size:"mini"}},[t._v("一级")]):1===e.row.cat_level?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("二级")]):a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("三级")])]}}])},[a("template",{slot:"opt"},[a("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"}},[t._v("操作")]),a("el-button",{attrs:{icon:"el-icon-delete",type:"danger",size:"mini"}},[t._v("删除")])],1)],2),a("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[5,10,15,20],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{title:"添加分类",visible:t.showAddCatDialog,width:"50%"},on:{"update:visible":function(e){t.showAddCatDialog=e},close:t.closeAddCatDialog}},[a("el-form",{ref:"addCatRefs",attrs:{model:t.addCatForm,rules:t.addCatRules}},[a("el-form-item",{attrs:{label:"分类名称：","label-width":"100px",prop:"cat_name"}},[a("el-input",{model:{value:t.addCatForm.cat_name,callback:function(e){t.$set(t.addCatForm,"cat_name",e)},expression:"addCatForm.cat_name"}})],1),a("el-form-item",{attrs:{label:"父级分类：","label-width":"100px"}},[a("el-cascader",{attrs:{options:t.parentCatList,props:t.cascaderProps,clearable:"","change-on-select":""},on:{change:t.parentCatChange},model:{value:t.cascaderSaveData,callback:function(e){t.cascaderSaveData=e},expression:"cascaderSaveData"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.showAddCatDialog=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitAddCatDialog}},[t._v("确 定")])],1)],1)],1)],1)},n=[],i=(a("96cf"),a("1da1")),s={data:function(){return{queryInfo:{type:3,pagenum:1,pagesize:5},catList:[],total:0,columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",prop:"cat_deleted",type:"template",template:"isok"},{label:"排序",prop:"cat_level",type:"template",template:"level"},{label:"操作",type:"template",template:"opt"}],showAddCatDialog:!1,addCatForm:{cat_pid:0,cat_name:"",cat_level:0},addCatRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}]},parentCatList:[],cascaderProps:{expandTrigger:"hover",label:"cat_name",value:"cat_id",children:"children"},cascaderSaveData:[]}},created:function(){this.getCatList()},methods:{getCatList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:t.queryInfo});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("请求商品分类失败！"));case 6:t.catList=r.data.result,t.total=r.data.total;case 8:case"end":return e.stop()}}),e)})))()},handleSizeChange:function(t){this.queryInfo.pagesize=t,this.getCatList()},handleCurrentChange:function(t){this.queryInfo.pagenum=t,this.getCatList()},addCatDialog:function(){this.getParentCatList(),this.showAddCatDialog=!0},closeAddCatDialog:function(){this.$refs.addCatRefs.resetFields(),this.cascaderSaveData=[],this.addCatForm.cat_pid=0,this.addCatForm.cat_level=0},getParentCatList:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("categories",{params:{type:2}});case 2:if(a=e.sent,r=a.data,200===r.meta.status){e.next=6;break}return e.abrupt("return",t.$message.error("获取父级节点失败！"));case 6:t.parentCatList=r.data;case 7:case"end":return e.stop()}}),e)})))()},parentCatChange:function(){this.cascaderSaveData.length>0?(this.addCatForm.cat_pid=this.cascaderSaveData[this.cascaderSaveData.length-1],this.addCatForm.cat_level=this.cascaderSaveData.length):(this.cascaderSaveData.cat_pid=0,this.cascaderSaveData.cat_level=0)},submitAddCatDialog:function(){var t=this;this.$refs.addCatRefs.validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.$http.post("categories",t.addCatForm);case 4:if(r=e.sent,n=r.data,201===n.meta.status){e.next=8;break}return e.abrupt("return",t.$message.error("添加分类失败！"));case 8:t.$message.success("添加分类成功"),t.getCatList(),t.showAddCatDialog=!1;case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},o=s,l=(a("68ae"),a("2877")),c=Object(l["a"])(o,r,n,!1,null,"446be68f",null);e["default"]=c.exports},d784:function(t,e,a){"use strict";a("ac1f");var r=a("6eeb"),n=a("d039"),i=a("b622"),s=a("9263"),o=a("9112"),l=i("species"),c=!n((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=i("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),m=!n((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2!==a.length||"a"!==a[0]||"b"!==a[1]}));t.exports=function(t,e,a,d){var f=i(t),g=!n((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),h=g&&!n((function(){var e=!1,a=/a/;return"split"===t&&(a={},a.constructor={},a.constructor[l]=function(){return a},a.flags="",a[f]=/./[f]),a.exec=function(){return e=!0,null},a[f](""),!e}));if(!g||!h||"replace"===t&&(!c||!u||p)||"split"===t&&!m){var v=/./[f],b=a(f,""[t],(function(t,e,a,r,n){return e.exec===s?g&&!n?{done:!0,value:v.call(e,a,r)}:{done:!0,value:t.call(a,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),x=b[0],w=b[1];r(String.prototype,t,x),r(RegExp.prototype,f,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}d&&o(RegExp.prototype[f],"sham",!0)}},dea9:function(t,e,a){"use strict";var r=a("5621"),n=a.n(r);n.a}}]);
//# sourceMappingURL=categories_params.3ce0d4e2.js.map